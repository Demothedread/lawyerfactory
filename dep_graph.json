{
  "entities": [
    {
      "id": "Maestro",
      "type": "agent",
      "features": ["orchestration", "coordination"],
      "relationships": ["directs_research_bot", "receives_feedback_editor", "passes_research_writer"],
      "location": "src/lawyerfactory/agents/orchestration/maestro.py"
    },
    {
      "id": "Reader",
      "type": "agent",
      "features": ["document_intake", "fact_extraction"],
      "relationships": ["feeds_maestro", "uses_assessor"],
      "location": "src/lawyerfactory/agents/intake/reader.py"
    },
    {
      "id": "Assessor",
      "type": "agent",
      "features": ["document_processing", "categorization", "AI_summarization"],
      "relationships": ["adds_to_repository", "supports_reader"],
      "location": "src/lawyerfactory/agents/intake/assessor.py"
    },
    {
      "id": "LegalResearcher",
      "type": "agent",
      "features": ["research", "authority_assessment"],
      "relationships": ["uses_repository", "integrates_courtlistener"],
      "location": "src/lawyerfactory/agents/research/legal_researcher.py"
    },
    {
      "id": "Writer",
      "type": "agent",
      "features": ["drafting", "Law_of_Threes", "AI_summarization", "RAG_enhancement", "nested_IR(irac)C"],
      "relationships": ["receives_research", "produces_documents"],
      "location": "src/lawyerfactory/agents/drafting/writer.py"
    },
    {
      "id": "Editor",
      "type": "agent",
      "features": ["style", "coherence", "quality_assurance", "AI_editing", "RAG_enhancement", "citation_checking", "court_rules_compliance"],
      "relationships": ["reviews_documents", "provides_feedback_maestro"],
      "location": "src/lawyerfactory/agents/review/editor.py"
    },
    {
      "id": "Repository",
      "type": "database",
      "features": ["metadata_storage", "CSV_persistence"],
      "relationships": ["source_for_researcher", "updated_by_assessor"],
      "location": "src/lawyerfactory/storage/repository.py"
    },
    {
      "id": "KnowledgeGraph",
      "type": "data_structure",
      "features": ["entity_relationships", "semantic_network"],
      "relationships": ["enhances_all_agents"],
      "location": "src/lawyerfactory/kg/enhanced_graph.py"
    },
    {
      "id": "VectorStore",
      "type": "data_structure",
      "features": ["semantic_search", "RAG_enhancement"],
      "relationships": ["supports_research", "enables_drafting"],
      "location": "src/lawyerfactory/vectors/enhanced_vector_store.py"
    },
    {
      "id": "UnifiedStorage",
      "type": "infrastructure",
      "features": ["multi_backend_storage", "fallback_mechanisms"],
      "relationships": ["provides_persistence"],
      "location": "src/lawyerfactory/storage/unified_storage_api.py"
    }
  ],
  "relationships": [
    {
      "from": "Maestro",
      "to": "LegalResearcher",
      "type": "directs",
      "description": "Central coordinator delegates research tasks"
    },
    {
      "from": "LegalResearcher",
      "to": "Repository",
      "type": "reads",
      "description": "Research agent queries stored documents"
    },
    {
      "from": "Assessor",
      "to": "Repository",
      "type": "writes",
      "description": "Document processor stores analyzed content"
    },
    {
      "from": "Maestro",
      "to": "Writer",
      "type": "feeds",
      "description": "Coordinator passes research to drafting agent"
    },
    {
      "from": "Writer",
      "to": "Editor",
      "type": "produces",
      "description": "Drafting agent creates documents for review"
    },
    {
      "from": "Editor",
      "to": "Maestro",
      "type": "reports",
      "description": "Review agent provides quality feedback"
    },
    {
      "from": "Reader",
      "to": "Assessor",
      "type": "feeds",
      "description": "Document intake feeds processing pipeline"
    },
    {
      "from": "KnowledgeGraph",
      "to": "all_agents",
      "type": "enhances",
      "description": "Semantic network improves all agent capabilities"
    },
    {
      "from": "VectorStore",
      "to": "LegalResearcher",
      "type": "supports",
      "description": "Vector search enables semantic research"
    },
    {
      "from": "VectorStore",
      "to": "Writer",
      "type": "enables",
      "description": "RAG capabilities enhance document generation"
    },
    {
      "from": "UnifiedStorage",
      "to": "Repository",
      "type": "backs",
      "description": "Enterprise storage provides persistence layer"
    }
  ],
  "workflows": [
    {
      "id": "intake_workflow",
      "description": "Document intake and initial processing",
      "steps": ["Reader", "Assessor", "Repository"],
      "data_flow": ["raw_documents", "processed_content", "stored_metadata"]
    },
    {
      "id": "research_workflow",
      "description": "Legal research and authority identification",
      "steps": ["Maestro", "LegalResearcher", "VectorStore"],
      "data_flow": ["research_queries", "case_law_results", "authority_assessments"]
    },
    {
      "id": "drafting_workflow",
      "description": "Document composition and generation",
      "steps": ["Maestro", "Writer", "KnowledgeGraph"],
      "data_flow": ["research_findings", "draft_documents", "enhanced_content"]
    },
    {
      "id": "review_workflow",
      "description": "Quality assurance and editing",
      "steps": ["Editor", "Maestro", "UnifiedStorage"],
      "data_flow": ["draft_documents", "quality_feedback", "final_documents"]
    }
  ],
  "external_integrations": [
    {
      "id": "courtlistener_api",
      "type": "legal_database",
      "usage": "LegalResearcher",
      "description": "Federal and state court opinions database"
    },
    {
      "id": "google_scholar",
      "type": "academic_database",
      "usage": "LegalResearcher",
      "description": "Academic legal research and citations"
    },
    {
      "id": "openai_api",
      "type": "llm_service",
      "usage": "Writer, Editor",
      "description": "AI-powered document generation and editing"
    },
    {
      "id": "qdrant_vector_db",
      "type": "vector_database",
      "usage": "VectorStore",
      "description": "High-performance vector similarity search"
    }
  ],
  "circular_dependencies": [],
  "optimization_opportunities": [
    {
      "type": "consolidation",
      "description": "Merge infrastructure/ and infra/ directories",
      "impact": "high",
      "effort": "medium"
    },
    {
      "type": "consolidation",
      "description": "Merge knowledge_graph/ and kg/ directories",
      "impact": "high",
      "effort": "medium"
    },
    {
      "type": "flattening",
      "description": "Reduce phase directory depth (phaseA01_ â†’ intake/)",
      "impact": "medium",
      "effort": "high"
    },
    {
      "type": "reorganization",
      "description": "Move UI components to dedicated ui/ directory",
      "impact": "low",
      "effort": "medium"
    }
  ]
}