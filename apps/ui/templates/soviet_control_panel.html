<!-- 
LawyerFactory Soviet Control Panel Interface
Industrial control board aesthetic with 3-panel layout for legal workflow automation
Optimized for 1920x1080 displays with collapsible panels for focus mode
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öôÔ∏è LawyerFactory Control Station</title>
    
    <!-- Core Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- React and Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/framer-motion@10.16.4/dist/framer-motion.umd.js"></script>
    
    <!-- ag-Grid for Evidence Management -->
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community@30.2.1/dist/ag-grid-community.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community@30.2.1/dist/ag-grid-theme-quartz.min.css" />
    
    <!-- Soviet Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;500;700;900&family=Russo+One&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Soviet Control Board Color Palette */
            --soviet-brass: #B87333;
            --soviet-bronze: #CD7F32;
            --soviet-emerald: #00563F;
            --soviet-crimson: #DC143C;
            --soviet-silver: #C0C0C0;
            --soviet-charcoal: #1A1A1A;
            --soviet-steel: #434B4D;
            --soviet-amber: #FFB000;
            --soviet-warning: #FF6B35;
            --soviet-success: #00A878;
            --panel-rivets: #8B8680;
            
            /* Panel Dimensions */
            --panel-left: 400px;
            --panel-center: 920px;
            --panel-right: 600px;
            --panel-header: 80px;
            --panel-collapsed: 48px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Share Tech Mono', 'Russo One', monospace;
            background: linear-gradient(135deg, var(--soviet-charcoal) 0%, var(--soviet-steel) 100%);
            color: var(--soviet-silver);
            overflow: hidden;
            position: relative;
        }
        
        /* Scanline Effect */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 0, 0, 0.03) 2px,
                rgba(0, 0, 0, 0.03) 4px
            );
            pointer-events: none;
            z-index: 9999;
        }
        
        /* Main Control Panel Container */
        .control-station {
            display: flex;
            height: 100vh;
            position: relative;
            background: radial-gradient(ellipse at center, rgba(184, 115, 51, 0.05) 0%, transparent 70%);
        }
        
        /* Metal Panel Base Style */
        .metal-panel {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 50%, #2a2a2a 100%);
            border: 3px solid var(--soviet-brass);
            position: relative;
            box-shadow: 
                inset 0 2px 5px rgba(0,0,0,0.5),
                inset 0 -2px 5px rgba(0,0,0,0.5),
                0 4px 8px rgba(0,0,0,0.8);
        }
        
        /* Rivet Decoration */
        .rivets::before,
        .rivets::after {
            content: '‚¨¢ ‚¨¢ ‚¨¢ ‚¨¢';
            position: absolute;
            color: var(--panel-rivets);
            font-size: 10px;
            letter-spacing: 20px;
            left: 10px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .rivets::before {
            top: 8px;
        }
        
        .rivets::after {
            bottom: 8px;
        }
        
        /* Panel Headers */
        .panel-header {
            height: var(--panel-header);
            background: linear-gradient(180deg, var(--soviet-brass) 0%, var(--soviet-bronze) 100%);
            border-bottom: 3px solid var(--soviet-charcoal);
            display: flex;
            align-items: center;
            padding: 0 20px;
            position: relative;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            color: var(--soviet-charcoal);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        /* Warning Stripes */
        .warning-stripe {
            height: 8px;
            background: repeating-linear-gradient(
                45deg,
                var(--soviet-amber),
                var(--soviet-amber) 10px,
                var(--soviet-charcoal) 10px,
                var(--soviet-charcoal) 20px
            );
        }
        
        /* Analog Gauge Component */
        .analog-gauge {
            width: 120px;
            height: 120px;
            position: relative;
            background: radial-gradient(circle at center, #1a1a1a 0%, #0f0f0f 100%);
            border: 3px solid var(--soviet-brass);
            border-radius: 50%;
            box-shadow: 
                inset 0 0 20px rgba(0,0,0,0.8),
                0 2px 10px rgba(0,0,0,0.5);
        }
        
        .gauge-needle {
            position: absolute;
            width: 2px;
            height: 45px;
            background: var(--soviet-crimson);
            left: 50%;
            top: 15%;
            transform-origin: center bottom;
            transform: translateX(-50%) rotate(0deg);
            transition: transform 0.3s ease-out;
            box-shadow: 0 0 4px var(--soviet-crimson);
        }
        
        .gauge-center {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--soviet-brass);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
        }
        
        /* Toggle Switch Component */
        .toggle-switch {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: var(--soviet-charcoal);
            border: 2px solid var(--soviet-brass);
            border-radius: 4px;
        }
        
        .toggle-track {
            width: 60px;
            height: 30px;
            background: linear-gradient(180deg, #0f0f0f 0%, #2a2a2a 100%);
            border-radius: 15px;
            position: relative;
            cursor: pointer;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.8);
        }
        
        .toggle-handle {
            width: 26px;
            height: 26px;
            background: linear-gradient(135deg, var(--soviet-brass) 0%, var(--soviet-bronze) 100%);
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .toggle-switch.active .toggle-handle {
            transform: translateX(30px);
        }
        
        .led-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--soviet-crimson);
            box-shadow: 0 0 8px var(--soviet-crimson);
            opacity: 0.3;
            transition: opacity 0.2s ease;
        }
        
        .toggle-switch.active .led-indicator {
            background: var(--soviet-success);
            box-shadow: 0 0 12px var(--soviet-success);
            opacity: 1;
        }
        
        /* Nixie Tube Display */
        .nixie-display {
            display: inline-block;
            padding: 10px 15px;
            background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);
            border: 2px solid var(--soviet-brass);
            border-radius: 6px;
            font-family: 'Orbitron', monospace;
            font-size: 28px;
            font-weight: 900;
            color: var(--soviet-amber);
            text-shadow: 0 0 10px var(--soviet-amber);
            box-shadow: 
                inset 0 0 20px rgba(255, 176, 0, 0.2),
                0 2px 10px rgba(0,0,0,0.8);
        }
        
        /* Mechanical Button */
        .mech-button {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--soviet-brass) 0%, var(--soviet-bronze) 50%, var(--soviet-brass) 100%);
            border: 3px solid var(--soviet-charcoal);
            border-radius: 6px;
            font-family: 'Russo One', sans-serif;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--soviet-charcoal);
            cursor: pointer;
            position: relative;
            transition: all 0.1s ease;
            box-shadow: 
                0 4px 0 var(--soviet-charcoal),
                0 6px 8px rgba(0,0,0,0.5);
        }
        
        .mech-button:active {
            transform: translateY(4px);
            box-shadow: 
                0 0 0 var(--soviet-charcoal),
                0 2px 4px rgba(0,0,0,0.5);
        }
        
        .mech-button.danger {
            background: linear-gradient(135deg, var(--soviet-crimson) 0%, #B91C1C 50%, var(--soviet-crimson) 100%);
            color: white;
        }
        
        .mech-button.success {
            background: linear-gradient(135deg, var(--soviet-emerald) 0%, #00A878 50%, var(--soviet-emerald) 100%);
            color: white;
        }
        
        /* Status Light Array */
        .status-lights {
            display: flex;
            gap: 8px;
            padding: 10px;
            background: var(--soviet-charcoal);
            border: 2px solid var(--soviet-steel);
            border-radius: 4px;
        }
        
        .status-light {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--soviet-steel);
            position: relative;
            transition: all 0.3s ease;
        }
        
        .status-light.green {
            background: var(--soviet-success);
            box-shadow: 0 0 10px var(--soviet-success);
        }
        
        .status-light.amber {
            background: var(--soviet-amber);
            box-shadow: 0 0 10px var(--soviet-amber);
            animation: pulse 1s infinite;
        }
        
        .status-light.red {
            background: var(--soviet-crimson);
            box-shadow: 0 0 10px var(--soviet-crimson);
            animation: blink 0.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes blink {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.3; }
        }
        
        /* Panel Layouts */
        .panel-left {
            width: var(--panel-left);
            transition: width 0.3s ease;
            border-right: 3px solid var(--soviet-brass);
        }
        
        .panel-center {
            flex: 1;
            min-width: var(--panel-center);
        }
        
        .panel-right {
            width: var(--panel-right);
            transition: width 0.3s ease;
            border-left: 3px solid var(--soviet-brass);
        }
        
        .panel-collapsed {
            width: var(--panel-collapsed) !important;
        }
        
        .panel-content {
            padding: 20px;
            height: calc(100vh - var(--panel-header));
            overflow-y: auto;
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--soviet-charcoal);
            border: 1px solid var(--soviet-steel);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--soviet-brass);
            border-radius: 2px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--soviet-bronze);
        }
        
        /* Soviet Grid Theme Override */
        .ag-theme-soviet {
            --ag-background-color: var(--soviet-charcoal);
            --ag-header-background-color: var(--soviet-steel);
            --ag-header-foreground-color: var(--soviet-silver);
            --ag-border-color: var(--soviet-brass);
            --ag-row-hover-color: rgba(184, 115, 51, 0.1);
            --ag-selected-row-background-color: rgba(0, 86, 63, 0.2);
        }
        
        /* Chat Interface */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .chat-message {
            display: flex;
            gap: 12px;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .agent-avatar {
            width: 48px;
            height: 48px;
            background: var(--soviet-brass);
            border: 2px solid var(--soviet-charcoal);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }
        
        .message-content {
            flex: 1;
            padding: 12px;
            background: rgba(43, 75, 77, 0.3);
            border: 1px solid var(--soviet-steel);
            border-radius: 6px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .chat-input {
            padding: 20px;
            border-top: 2px solid var(--soviet-brass);
            background: var(--soviet-charcoal);
        }
        
        .input-field {
            width: 100%;
            padding: 12px;
            background: var(--soviet-steel);
            border: 2px solid var(--soviet-brass);
            border-radius: 4px;
            color: var(--soviet-silver);
            font-family: 'Share Tech Mono', monospace;
            font-size: 14px;
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--soviet-amber);
            box-shadow: 0 0 10px rgba(255, 176, 0, 0.3);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;
        const { motion, AnimatePresence } = window['framer-motion'];
        
        // Soviet Control Components
        const AnalogGauge = ({ value, max = 100, label, color = 'crimson' }) => {
            const rotation = (value / max) * 270 - 135;
            
            return (
                <div className="analog-gauge">
                    <div 
                        className="gauge-needle" 
                        style={{ 
                            transform: `translateX(-50%) rotate(${rotation}deg)`,
                            background: `var(--soviet-${color})`
                        }}
                    />
                    <div className="gauge-center" />
                    <div style={{
                        position: 'absolute',
                        bottom: '10px',
                        width: '100%',
                        textAlign: 'center',
                        fontSize: '10px',
                        textTransform: 'uppercase',
                        letterSpacing: '1px',
                        color: 'var(--soviet-brass)'
                    }}>
                        {label}
                    </div>
                    <div style={{
                        position: 'absolute',
                        bottom: '25px',
                        width: '100%',
                        textAlign: 'center',
                        fontSize: '14px',
                        fontWeight: 'bold',
                        fontFamily: 'Orbitron',
                        color: 'var(--soviet-amber)',
                        textShadow: '0 0 5px var(--soviet-amber)'
                    }}>
                        {value}%
                    </div>
                </div>
            );
        };
        
        const ToggleSwitch = ({ active, onChange, label }) => {
            return (
                <div className={`toggle-switch ${active ? 'active' : ''}`} onClick={onChange}>
                    <span style={{ fontSize: '12px', textTransform: 'uppercase' }}>{label}</span>
                    <div className="toggle-track">
                        <div className="toggle-handle" />
                    </div>
                    <div className="led-indicator" />
                </div>
            );
        };
        
        const NixieDisplay = ({ value, label }) => {
            return (
                <div style={{ display: 'inline-block' }}>
                    <div style={{ fontSize: '10px', marginBottom: '5px', textTransform: 'uppercase', opacity: 0.7 }}>
                        {label}
                    </div>
                    <div className="nixie-display">
                        {String(value).padStart(4, '0')}
                    </div>
                </div>
            );
        };
        
        const StatusLights = ({ status }) => {
            return (
                <div className="status-lights">
                    <div className={`status-light ${status === 'ready' ? 'green' : ''}`} title="Ready" />
                    <div className={`status-light ${status === 'processing' ? 'amber' : ''}`} title="Processing" />
                    <div className={`status-light ${status === 'error' ? 'red' : ''}`} title="Error" />
                </div>
            );
        };
        
        const MetalPanel = ({ title, children, className = '', rivets = true }) => {
            return (
                <div className={`metal-panel ${rivets ? 'rivets' : ''} ${className}`}>
                    {title && (
                        <div className="panel-header">
                            {title}
                        </div>
                    )}
                    <div className="panel-content">
                        {children}
                    </div>
                </div>
            );
        };
        
        // Workflow Panel Component
        const WorkflowPanel = ({ phases, activePhase, completedPhases, onPhaseSelect, collapsed }) => {
            const [systemStatus, setSystemStatus] = useState('ready');
            
            return (
                <div className={`panel-left metal-panel ${collapsed ? 'panel-collapsed' : ''}`}>
                    <div className="panel-header">
                        <span style={{ flex: 1 }}>WORKFLOW CONTROL</span>
                        <StatusLights status={systemStatus} />
                    </div>
                    
                    {!collapsed && (
                        <div className="panel-content">
                            <div className="warning-stripe" style={{ marginBottom: '20px' }} />
                            
                            {/* System Gauges */}
                            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginBottom: '30px' }}>
                                <AnalogGauge 
                                    value={Math.round((completedPhases.size / phases.length) * 100)} 
                                    label="Progress"
                                    color="emerald"
                                />
                                <AnalogGauge 
                                    value={activePhase ? 75 : 0} 
                                    label="Activity"
                                    color="amber"
                                />
                            </div>
                            
                            {/* Phase Controls */}
                            <div style={{ marginBottom: '30px' }}>
                                <div style={{ 
                                    fontSize: '12px', 
                                    textTransform: 'uppercase', 
                                    letterSpacing: '2px',
                                    color: 'var(--soviet-brass)',
                                    marginBottom: '15px',
                                    paddingBottom: '10px',
                                    borderBottom: '1px solid var(--soviet-brass)'
                                }}>
                                    PHASE SELECTION
                                </div>
                                
                                {phases.map(phase => (
                                    <div 
                                        key={phase.id}
                                        style={{
                                            padding: '12px',
                                            marginBottom: '10px',
                                            background: activePhase === phase.id ? 
                                                'linear-gradient(90deg, rgba(184, 115, 51, 0.2) 0%, transparent 100%)' :
                                                'rgba(67, 75, 77, 0.3)',
                                            border: `2px solid ${
                                                completedPhases.has(phase.id) ? 'var(--soviet-success)' :
                                                activePhase === phase.id ? 'var(--soviet-amber)' : 
                                                'var(--soviet-steel)'
                                            }`,
                                            borderRadius: '4px',
                                            cursor: 'pointer',
                                            transition: 'all 0.2s ease'
                                        }}
                                        onClick={() => onPhaseSelect(phase.id)}
                                    >
                                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                                            <div style={{
                                                width: '32px',
                                                height: '32px',
                                                background: completedPhases.has(phase.id) ? 'var(--soviet-success)' :
                                                           activePhase === phase.id ? 'var(--soviet-amber)' : 'var(--soviet-steel)',
                                                borderRadius: '4px',
                                                display: 'flex',
                                                alignItems: 'center',
                                                justifyContent: 'center',
                                                fontSize: '18px',
                                                boxShadow: completedPhases.has(phase.id) ? 
                                                    '0 0 10px var(--soviet-success)' :
                                                    activePhase === phase.id ? '0 0 10px var(--soviet-amber)' : 'none'
                                            }}>
                                                {completedPhases.has(phase.id) ? '‚úì' : phase.icon}
                                            </div>
                                            <div style={{ flex: 1 }}>
                                                <div style={{ fontWeight: 'bold', fontSize: '14px' }}>
                                                    {phase.id}: {phase.name}
                                                </div>
                                                <div style={{ fontSize: '11px', opacity: 0.7, marginTop: '2px' }}>
                                                    {phase.description}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            
                            {/* System Controls */}
                            <div style={{ 
                                borderTop: '2px solid var(--soviet-brass)', 
                                paddingTop: '20px',
                                display: 'flex',
                                flexDirection: 'column',
                                gap: '15px'
                            }}>
                                <ToggleSwitch 
                                    active={true} 
                                    label="Auto Mode" 
                                    onChange={() => {}}
                                />
                                <ToggleSwitch 
                                    active={false} 
                                    label="Safety Lock" 
                                    onChange={() => {}}
                                />
                                
                                <button className="mech-button danger" style={{ width: '100%', marginTop: '10px' }}>
                                    EMERGENCY STOP
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };
        
        // Deliverables Panel Component
        const DeliverablesPanel = ({ activePhase }) => {
            const [activeTab, setActiveTab] = useState('evidence');
            const gridRef = useRef(null);
            
            // Evidence table configuration
            const [rowData] = useState([
                { id: 1, date: '2024-01-15', type: 'Contract', description: 'Original service agreement', relevance: 'High', status: 'Verified' },
                { id: 2, date: '2024-02-20', type: 'Email', description: 'Breach notification', relevance: 'Critical', status: 'Verified' },
                { id: 3, date: '2024-03-10', type: 'Invoice', description: 'Unpaid invoice #INV-001', relevance: 'High', status: 'Pending' },
            ]);
            
            const columnDefs = [
                { field: 'id', headerName: 'ID', width: 60 },
                { field: 'date', headerName: 'Date', width: 100 },
                { field: 'type', headerName: 'Type', width: 100 },
                { field: 'description', headerName: 'Description', flex: 1 },
                { field: 'relevance', headerName: 'Relevance', width: 100 },
                { field: 'status', headerName: 'Status', width: 100 }
            ];
            
            useEffect(() => {
                if (activeTab === 'evidence' && gridRef.current) {
                    const gridOptions = {
                        columnDefs: columnDefs,
                        rowData: rowData,
                        animateRows: true,
                        rowSelection: 'multiple'
                    };
                    
                    const eGridDiv = gridRef.current;
                    new agGrid.Grid(eGridDiv, gridOptions);
                }
            }, [activeTab]);
            
            const renderContent = () => {
                switch(activeTab) {
                    case 'evidence':
                        return (
                            <div>
                                <div style={{ height: '400px', width: '100%' }} className="ag-theme-quartz-dark" ref={gridRef}></div>
                            </div>
                        );
                    
                    case 'claims':
                        return (
                            <div style={{ padding: '20px', background: 'rgba(0, 0, 0, 0.3)', borderRadius: '6px' }}>
                                <h3 style={{ marginBottom: '20px', color: 'var(--soviet-amber)' }}>Claims Matrix</h3>
                                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '20px' }}>
                                    {['Breach of Contract', 'Damages', 'Lost Revenue'].map((claim, index) => (
                                        <div key={index} style={{
                                            padding: '15px',
                                            background: 'var(--soviet-steel)',
                                            border: '2px solid var(--soviet-brass)',
                                            borderRadius: '4px'
                                        }}>
                                            <div style={{ fontWeight: 'bold', marginBottom: '10px' }}>{claim}</div>
                                            <div style={{ fontSize: '12px', opacity: 0.8 }}>
                                                Evidence Items: {3 + index}
                                            </div>
                                            <div style={{ 
                                                marginTop: '10px',
                                                display: 'flex',
                                                gap: '5px'
                                            }}>
                                                {[...Array(5)].map((_, i) => (
                                                    <div key={i} className={`status-light ${i <= index ? 'green' : ''}`} 
                                                         style={{ width: '10px', height: '10px' }} />
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );
                    
                    case 'sequence':
                        return (
                            <div style={{ padding: '20px' }}>
                                <h3 style={{ marginBottom: '20px', color: 'var(--soviet-amber)' }}>Shot-by-Shot List</h3>
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '15px' }}>
                                    {['Opening Statement', 'Fact Pattern', 'Legal Arguments', 'Relief Sought'].map((item, index) => (
                                        <div key={index} style={{
                                            display: 'flex',
                                            alignItems: 'center',
                                            padding: '15px',
                                            background: 'linear-gradient(90deg, rgba(184, 115, 51, 0.1) 0%, transparent 100%)',
                                            border: '2px solid var(--soviet-brass)',
                                            borderRadius: '4px',
                                            cursor: 'move'
                                        }}>
                                            <div style={{
                                                width: '40px',
                                                height: '40px',
                                                background: 'var(--soviet-brass)',
                                                borderRadius: '4px',
                                                display: 'flex',
                                                alignItems: 'center',
                                                justifyContent: 'center',
                                                marginRight: '15px',
                                                fontWeight: 'bold',
                                                fontSize: '18px',
                                                color: 'var(--soviet-charcoal)'
                                            }}>
                                                {index + 1}
                                            </div>
                                            <div style={{ flex: 1 }}>
                                                <div style={{ fontWeight: 'bold' }}>{item}</div>
                                                <div style={{ fontSize: '12px', opacity: 0.7, marginTop: '4px' }}>
                                                    Duration: {2 + index} pages ‚Ä¢ Status: Draft
                                                </div>
                                            </div>
                                            <div style={{ fontSize: '20px', opacity: 0.5, cursor: 'grab' }}>‚ò∞</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );
                    
                    default:
                        return null;
                }
            };
            
            return (
                <div className="panel-center metal-panel">
                    <div className="panel-header">
                        <span style={{ flex: 1 }}>DELIVERABLES WORKSPACE</span>
                        <div style={{ display: 'flex', gap: '20px' }}>
                            <NixieDisplay value={rowData.length} label="Items" />
                            <NixieDisplay value={3} label="Claims" />
                        </div>
                    </div>
                    
                    <div className="panel-content">
                        {/* Tab Navigation */}
                        <div style={{ 
                            display: 'flex', 
                            gap: '10px', 
                            marginBottom: '20px',
                            borderBottom: '2px solid var(--soviet-brass)',
                            paddingBottom: '10px'
                        }}>
                            {[
                                { id: 'evidence', label: 'Evidence Table', icon: 'üìä' },
                                { id: 'claims', label: 'Claims Matrix', icon: 'üéØ' },
                                { id: 'sequence', label: 'Shot List', icon: 'üé¨' }
                            ].map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    style={{
                                        padding: '10px 20px',
                                        background: activeTab === tab.id ? 
                                            'var(--soviet-brass)' : 'var(--soviet-steel)',
                                        border: 'none',
                                        borderRadius: '4px 4px 0 0',
                                        color: activeTab === tab.id ? 
                                            'var(--soviet-charcoal)' : 'var(--soviet-silver)',
                                        fontWeight: 'bold',
                                        cursor: 'pointer',
                                        display: 'flex',
                                        alignItems: 'center',
                                        gap: '8px'
                                    }}
                                >
                                    <span>{tab.icon}</span>
                                    <span>{tab.label}</span>
                                </button>
                            ))}
                        </div>
                        
                        {/* Content Area */}
                        {renderContent()}
                        
                        {/* Action Buttons */}
                        <div style={{ 
                            marginTop: '30px', 
                            display: 'flex', 
                            gap: '15px',
                            padding: '20px',
                            background: 'rgba(0, 0, 0, 0.3)',
                            borderRadius: '6px'
                        }}>
                            <button className="mech-button">
                                EXPORT DATA
                            </button>
                            <button className="mech-button success">
                                GENERATE REPORT
                            </button>
                            <button className="mech-button">
                                SAVE PROGRESS
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // LLM Assistant Panel Component
        const AssistantPanel = ({ collapsed }) => {
            const [messages, setMessages] = useState([
                { id: 1, agent: 'Maestro', avatar: 'üé≠', content: 'System initialized. Ready to process legal documents.' },
                { id: 2, agent: 'Reader', avatar: 'üëì', content: 'Document intake module online. Awaiting uploads.' }
            ]);
            const [input, setInput] = useState('');
            
            const agents = [
                { name: 'Maestro', avatar: 'üé≠', status: 'ready' },
                { name: 'Reader', avatar: 'üëì', status: 'ready' },
                { name: 'Outliner', avatar: 'üìã', status: 'idle' },
                { name: 'Writer', avatar: '‚úçÔ∏è', status: 'idle' },
                { name: 'Editor', avatar: 'üìù', status: 'idle' },
                { name: 'Paralegal', avatar: '‚öñÔ∏è', status: 'idle' },
                { name: 'Formatter', avatar: 'üìê', status: 'idle' }
            ];
            
            const handleSend = () => {
                if (input.trim()) {
                    setMessages([...messages, {
                        id: messages.length + 1,
                        agent: 'User',
                        avatar: 'üë§',
                        content: input
                    }]);
                    setInput('');
                    
                    // Simulate response
                    setTimeout(() => {
                        setMessages(prev => [...prev, {
                            id: prev.length + 1,
                            agent: 'Maestro',
                            avatar: 'üé≠',
                            content: 'Processing your request...'
                        }]);
                    }, 1000);
                }
            };
            
            return (
                <div className={`panel-right metal-panel ${collapsed ? 'panel-collapsed' : ''}`}>
                    <div className="panel-header">
                        <span style={{ flex: 1 }}>LLM COMMAND CENTER</span>
                        <StatusLights status="ready" />
                    </div>
                    
                    {!collapsed && (
                        <div className="chat-container" style={{ height: 'calc(100vh - 80px)' }}>
                            {/* Agent Status Grid */}
                            <div style={{ 
                                padding: '15px', 
                                borderBottom: '2px solid var(--soviet-brass)',
                                background: 'rgba(0, 0, 0, 0.3)'
                            }}>
                                <div style={{ 
                                    fontSize: '12px', 
                                    textTransform: 'uppercase', 
                                    letterSpacing: '2px',
                                    marginBottom: '10px',
                                    color: 'var(--soviet-amber)'
                                }}>
                                    AGENT STATUS
                                </div>
                                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '10px' }}>
                                    {agents.map(agent => (
                                        <div key={agent.name} style={{
                                            padding: '8px',
                                            background: 'var(--soviet-steel)',
                                            borderRadius: '4px',
                                            textAlign: 'center',
                                            border: `1px solid ${
                                                agent.status === 'ready' ? 'var(--soviet-success)' :
                                                agent.status === 'busy' ? 'var(--soviet-amber)' :
                                                'var(--soviet-steel)'
                                            }`
                                        }}>
                                            <div style={{ fontSize: '20px' }}>{agent.avatar}</div>
                                            <div style={{ fontSize: '10px', marginTop: '4px' }}>{agent.name}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            {/* Chat Messages */}
                            <div className="chat-messages">
                                {messages.map(msg => (
                                    <div key={msg.id} className="chat-message">
                                        <div className="agent-avatar">{msg.avatar}</div>
                                        <div className="message-content">
                                            <div style={{ 
                                                fontSize: '11px', 
                                                textTransform: 'uppercase',
                                                marginBottom: '5px',
                                                color: 'var(--soviet-brass)'
                                            }}>
                                                {msg.agent}
                                            </div>
                                            <div>{msg.content}</div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            
                            {/* Quick Actions */}
                            <div style={{ 
                                padding: '15px',
                                borderTop: '1px solid var(--soviet-steel)',
                                borderBottom: '1px solid var(--soviet-steel)',
                                background: 'rgba(0, 0, 0, 0.3)'
                            }}>
                                <div style={{ 
                                    fontSize: '11px', 
                                    textTransform: 'uppercase',
                                    marginBottom: '10px',
                                    opacity: 0.7
                                }}>
                                    QUICK ACTIONS
                                </div>
                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px' }}>
                                    <button className="mech-button" style={{ fontSize: '12px', padding: '8px' }}>
                                        ANALYZE
                                    </button>
                                    <button className="mech-button" style={{ fontSize: '12px', padding: '8px' }}>
                                        SUMMARIZE
                                    </button>
                                    <button className="mech-button" style={{ fontSize: '12px', padding: '8px' }}>
                                        EXTRACT
                                    </button>
                                    <button className="mech-button" style={{ fontSize: '12px', padding: '8px' }}>
                                        DRAFT
                                    </button>
                                </div>
                            </div>
                            
                            {/* Chat Input */}
                            <div className="chat-input">
                                <div style={{ display: 'flex', gap: '10px' }}>
                                    <input
                                        type="text"
                                        className="input-field"
                                        placeholder="Enter command..."
                                        value={input}
                                        onChange={(e) => setInput(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                                    />
                                    <button 
                                        className="mech-button success" 
                                        onClick={handleSend}
                                        style={{ whiteSpace: 'nowrap' }}
                                    >
                                        TRANSMIT
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };
        
        // Main Application
        const LawyerFactoryControlStation = () => {
            const [leftCollapsed, setLeftCollapsed] = useState(false);
            const [rightCollapsed, setRightCollapsed] = useState(false);
            const [activePhase, setActivePhase] = useState('A01');
            const [completedPhases, setCompletedPhases] = useState(new Set());
            
            const phases = [
                { id: 'A01', name: 'Document Intake', description: 'Upload legal documents', icon: 'üìÑ' },
                { id: 'A02', name: 'Legal Research', description: 'Automated research', icon: 'üîç' },
                { id: 'A03', name: 'Case Outline', description: 'Structure arguments', icon: 'üìã' },
                { id: 'B01', name: 'Quality Review', description: 'Validate research', icon: '‚úÖ' },
                { id: 'B02', name: 'Document Drafting', description: 'Generate documents', icon: '‚úçÔ∏è' },
                { id: 'C01', name: 'Document Editing', description: 'Refine formatting', icon: 'üîß' },
                { id: 'C02', name: 'Final Orchestration', description: 'Finalize deliverables', icon: 'üéØ' }
            ];
            
            // Keyboard shortcuts
            useEffect(() => {
                const handleKeyPress = (e) => {
                    if (e.key === 'F1') {
                        e.preventDefault();
                        setLeftCollapsed(!leftCollapsed);
                    } else if (e.key === 'F2') {
                        e.preventDefault();
                        // Center panel is always visible
                    } else if (e.key === 'F3') {
                        e.preventDefault();
                        setRightCollapsed(!rightCollapsed);
                    }
                };
                
                window.addEventListener('keydown', handleKeyPress);
                return () => window.removeEventListener('keydown', handleKeyPress);
            }, [leftCollapsed, rightCollapsed]);
            
            // Socket.IO connection
            useEffect(() => {
                const socket = io('http://127.0.0.1:5000');
                
                socket.on('phase_progress', (data) => {
                    console.log('Phase progress:', data);
                });
                
                socket.on('phase_complete', (data) => {
                    setCompletedPhases(prev => new Set([...prev, data.phase]));
                });
                
                return () => {
                    socket.disconnect();
                };
            }, []);
            
            return (
                <div className="control-station">
                    <WorkflowPanel 
                        phases={phases}
                        activePhase={activePhase}
                        completedPhases={completedPhases}
                        onPhaseSelect={setActivePhase}
                        collapsed={leftCollapsed}
                    />
                    
                    <DeliverablesPanel 
                        activePhase={activePhase}
                    />
                    
                    <AssistantPanel 
                        collapsed={rightCollapsed}
                    />
                    
                    {/* Keyboard Shortcut Hints */}
                    <div style={{
                        position: 'fixed',
                        bottom: '20px',
                        left: '50%',
                        transform: 'translateX(-50%)',
                        padding: '10px 20px',
                        background: 'rgba(0, 0, 0, 0.8)',
                        border: '1px solid var(--soviet-brass)',
                        borderRadius: '4px',
                        fontSize: '11px',
                        textTransform: 'uppercase',
                        letterSpacing: '1px',
                        opacity: 0.7
                    }}>
                        F1: Toggle Workflow ‚Ä¢ F3: Toggle Assistant
                    </div>
                </div>
            );
        };
        
        // Render Application
        ReactDOM.render(<LawyerFactoryControlStation />, document.getElementById('root'));
    </script>
</body>
</html>