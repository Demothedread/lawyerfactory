<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öôÔ∏è LAWYERFACTORY ‚öôÔ∏è - MultiSWARM Phase Dashboard</title>

    <!-- Core Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --metallic-silver: #c0c0c0;
            --oxidized-copper: #b87333;
            --emerald-green: #50c878;
            --gold-accent: #ffd700;
            --rust-brown: #8b4513;
            --industrial-gray: #2f2f2f;
            --charcoal-dark: #1c1c1e;
            --steam-punk: #8b7355;
        }

        body {
            font-family: 'Courier Prime', 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, var(--charcoal-dark) 0%, var(--industrial-gray) 100%);
            color: var(--metallic-silver);
            overflow: hidden;
        }

        .phase-node {
            background: var(--oxidized-copper);
            border: 3px solid var(--gold-accent);
            border-radius: 50%;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .phase-node::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: conic-gradient(
                var(--emerald-green) 0deg,
                var(--emerald-green) var(--progress, 0%),
                transparent var(--progress, 0%)
            );
            border-radius: 50%;
            opacity: 0.7;
        }

        .phase-node.active {
            background: var(--emerald-green);
            box-shadow: 0 0 30px rgba(80,200,120,0.8);
            animation: pulse 2s ease-in-out infinite;
        }

        .phase-node.completed {
            background: var(--gold-accent);
            color: black;
        }

        .phase-connector {
            height: 4px;
            background: linear-gradient(90deg,
                var(--oxidized-copper) 0%,
                var(--gold-accent) 50%,
                var(--oxidized-copper) 100%);
            position: relative;
            overflow: hidden;
        }

        .phase-connector::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg,
                transparent,
                rgba(255,215,0,0.6),
                transparent);
            animation: flow 2s ease-in-out infinite;
        }

        .agent-card {
            background: linear-gradient(135deg,
                rgba(30, 41, 59, 0.9) 0%,
                rgba(51, 65, 85, 0.9) 100%);
            border: 2px solid var(--oxidized-copper);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .agent-card.active {
            border-color: var(--emerald-green);
            box-shadow: 0 0 20px rgba(80,200,120,0.4);
        }

        .agent-card.completed {
            border-color: var(--gold-accent);
            box-shadow: 0 0 20px rgba(255,215,0,0.4);
        }

        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring circle {
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
        }

        .progress-ring .background {
            stroke: var(--industrial-gray);
        }

        .progress-ring .progress {
            stroke: var(--emerald-green);
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            transition: stroke-dashoffset 0.5s ease;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes flow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .factory-header {
            background: linear-gradient(90deg,
                var(--industrial-gray) 0%,
                var(--steam-punk) 30%,
                var(--oxidized-copper) 70%,
                var(--industrial-gray) 100%);
            border-bottom: 3px solid var(--rust-brown);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
        }

        .console-panel {
            background: linear-gradient(135deg,
                var(--industrial-gray) 0%,
                var(--charcoal-dark) 50%,
                var(--industrial-gray) 100%);
            border: 2px solid var(--oxidized-copper);
            border-radius: 8px;
            box-shadow:
                inset 0 2px 4px rgba(0,0,0,0.5),
                0 4px 8px rgba(0,0,0,0.3),
                0 0 20px rgba(184,115,51,0.1);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid var(--oxidized-copper);
            position: relative;
        }

        .status-online {
            background: var(--emerald-green);
            box-shadow: 0 0 12px rgba(80,200,120,0.8);
            animation: pulse 2s ease-in-out infinite;
        }

        .status-busy {
            background: var(--gold-accent);
            box-shadow: 0 0 12px rgba(255,215,0,0.8);
            animation: spin 3s linear infinite;
        }

        .status-idle {
            background: var(--industrial-gray);
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="h-screen flex flex-col">
    <!-- Factory Header -->
    <header class="factory-header p-4 flex justify-between items-center">
        <div class="flex items-center space-x-4">
            <div class="text-3xl font-bold metallic-text tracking-wider">
                ‚öôÔ∏è LAWYERFACTORY ‚öôÔ∏è
            </div>
            <div class="text-sm metallic-text opacity-75">
                MultiSWARM Phase Dashboard v2.0
            </div>
        </div>

        <div class="flex items-center space-x-6">
            <div class="flex items-center space-x-2">
                <span class="status-indicator status-online"></span>
                <span class="text-sm metallic-text">MultiSWARM Online</span>
            </div>
            <div class="flex items-center space-x-2">
                <span class="status-indicator" id="systemStatus"></span>
                <span class="text-sm metallic-text">System Status</span>
            </div>

            <button onclick="startMultiswarm()" class="industrial-texture px-4 py-2 metallic-text hover:accent-text transition-all">
                ‚ñ∂Ô∏è Start MultiSWARM
            </button>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="flex-grow grid grid-cols-12 gap-4 p-4 overflow-hidden">
        <!-- Left Panel - Phase Visualization -->
        <div class="col-span-4 space-y-4">
            <div class="console-panel p-4">
                <h3 class="text-lg font-bold metallic-text mb-4">üîÑ MultiSWARM Phases</h3>

                <!-- Phase A: Intake & Research -->
                <div class="mb-6">
                    <h4 class="text-sm font-semibold metallic-text mb-3">üì• PHASE A: Intake & Research</h4>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <div class="phase-node w-8 h-8 flex items-center justify-center text-white font-bold text-sm" data-phase="A01_Intake">1</div>
                            <div class="flex-grow">
                                <div class="text-xs metallic-text">A01 Intake</div>
                                <div class="phase-connector flex-grow"></div>
                            </div>
                        </div>

                        <div class="flex items-center space-x-3">
                            <div class="phase-node w-7 h-7 flex items-center justify-center text-white font-bold text-xs" data-phase="A02_Research">2</div>
                            <div class="flex-grow">
                                <div class="text-xs metallic-text">A02 Research</div>
                                <div class="phase-connector flex-grow"></div>
                            </div>
                        </div>

                        <div class="flex items-center space-x-3">
                            <div class="phase-node w-7 h-7 flex items-center justify-center text-white font-bold text-xs" data-phase="A03_Outline">3</div>
                            <div class="flex-grow">
                                <div class="text-xs metallic-text">A03 Outline</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Phase B: Review & Drafting -->
                <div class="mb-6">
                    <h4 class="text-sm font-semibold metallic-text mb-3">‚öñÔ∏è PHASE B: Review & Drafting</h4>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <div class="phase-node w-7 h-7 flex items-center justify-center text-white font-bold text-xs" data-phase="B01_Review">4</div>
                            <div class="flex-grow">
                                <div class="text-xs metallic-text">B01 Review</div>
                                <div class="phase-connector flex-grow"></div>
                            </div>
                        </div>

                        <div class="flex items-center space-x-3">
                            <div class="phase-node w-7 h-7 flex items-center justify-center text-white font-bold text-xs" data-phase="B02_Drafting">5</div>
                            <div class="flex-grow">
                                <div class="text-xs metallic-text">B02 Drafting</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Phase C: Editing & Orchestration -->
                <div>
                    <h4 class="text-sm font-semibold metallic-text mb-3">üé≠ PHASE C: Editing & Orchestration</h4>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <div class="phase-node w-7 h-7 flex items-center justify-center text-white font-bold text-xs" data-phase="C01_Editing">6</div>
                            <div class="flex-grow">
                                <div class="text-xs metallic-text">C01 Editing</div>
                                <div class="phase-connector flex-grow"></div>
                            </div>
                        </div>

                        <div class="flex items-center space-x-3">
                            <div class="phase-node w-7 h-7 flex items-center justify-center text-white font-bold text-xs" data-phase="C02_Orchestration">7</div>
                            <div class="flex-grow">
                                <div class="text-xs metallic-text">C02 Orchestration</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Status Panel -->
            <div class="console-panel p-4">
                <h3 class="text-lg font-bold metallic-text mb-4">ü§ñ Agent Swarm Status</h3>
                <div class="grid grid-cols-1 gap-3">
                    <div class="agent-card p-3" data-agent="intake_agent">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm metallic-text">Intake Agent</span>
                            <span class="status-indicator status-idle" id="intake_status"></span>
                        </div>
                        <div class="relative">
                            <div class="progress-ring w-12 h-12">
                                <svg class="w-full h-full">
                                    <circle class="background" cx="24" cy="24" r="18"></circle>
                                    <circle class="progress" cx="24" cy="24" r="18" id="intake_progress"></circle>
                                </svg>
                            </div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xs metallic-text" id="intake_percent">0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="agent-card p-3" data-agent="research_agent">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm metallic-text">Research Agent</span>
                            <span class="status-indicator status-idle" id="research_status"></span>
                        </div>
                        <div class="relative">
                            <div class="progress-ring w-12 h-12">
                                <svg class="w-full h-full">
                                    <circle class="background" cx="24" cy="24" r="18"></circle>
                                    <circle class="progress" cx="24" cy="24" r="18" id="research_progress"></circle>
                                </svg>
                            </div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xs metallic-text" id="research_percent">0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="agent-card p-3" data-agent="drafting_agent">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm metallic-text">Drafting Agent</span>
                            <span class="status-indicator status-idle" id="drafting_status"></span>
                        </div>
                        <div class="relative">
                            <div class="progress-ring w-12 h-12">
                                <svg class="w-full h-full">
                                    <circle class="background" cx="24" cy="24" r="18"></circle>
                                    <circle class="progress" cx="24" cy="24" r="18" id="drafting_progress"></circle>
                                </svg>
                            </div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xs metallic-text" id="drafting_percent">0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="agent-card p-3" data-agent="orchestration_agent">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm metallic-text">Orchestration Agent</span>
                            <span class="status-indicator status-idle" id="orchestration_status"></span>
                        </div>
                        <div class="relative">
                            <div class="progress-ring w-12 h-12">
                                <svg class="w-full h-full">
                                    <circle class="background" cx="24" cy="24" r="18"></circle>
                                    <circle class="progress" cx="24" cy="24" r="18" id="orchestration_progress"></circle>
                                </svg>
                            </div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xs metallic-text" id="orchestration_percent">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Center Panel - Real-time Activity -->
        <div class="col-span-5 console-panel flex flex-col">
            <h2 class="text-xl font-bold p-4 metallic-text border-b border-oxidized-copper">
                üìä MultiSWARM Activity Console
            </h2>

            <div class="flex-grow p-4 space-y-4">
                <!-- Current Phase Display -->
                <div class="industrial-texture p-4 rounded">
                    <div class="flex justify-between items-center mb-2">
                        <span class="metallic-text font-semibold">Current Phase:</span>
                        <span class="accent-text font-bold" id="currentPhase">Ready</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="metallic-text text-sm">Overall Progress:</span>
                        <span class="emerald-text font-bold" id="overallProgress">0%</span>
                    </div>
                </div>

                <!-- Activity Feed -->
                <div class="flex-grow">
                    <h3 class="text-lg font-bold metallic-text mb-3">üìã Activity Feed</h3>
                    <div id="activityFeed" class="space-y-2 max-h-96 overflow-y-auto">
                        <div class="industrial-texture p-3 rounded">
                            <div class="font-medium accent-text">MultiSWARM Ready</div>
                            <div class="text-xs opacity-75 metallic-text">System initialized and waiting for commands</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Case Packets & Output -->
        <div class="col-span-3 space-y-4">
            <!-- Case Packet Delivery -->
            <div class="console-panel p-4">
                <h3 class="text-lg font-bold metallic-text mb-4">üì¶ Case Packet Delivery</h3>
                <div id="casePackets" class="space-y-3">
                    <div class="industrial-texture p-3 rounded">
                        <div class="font-medium metallic-text">No case packets ready</div>
                        <div class="text-xs opacity-75">Complete MultiSWARM pipeline to generate packets</div>
                    </div>
                </div>
            </div>

            <!-- System Metrics -->
            <div class="console-panel p-4">
                <h3 class="text-lg font-bold metallic-text mb-4">‚ö° System Metrics</h3>
                <div class="grid grid-cols-2 gap-3">
                    <div class="industrial-texture p-3 rounded text-center">
                        <div class="metric-value text-lg" id="activeCases">0</div>
                        <div class="metric-label text-xs metallic-text">Active Cases</div>
                    </div>
                    <div class="industrial-texture p-3 rounded text-center">
                        <div class="metric-value text-lg" id="processingTime">0.0s</div>
                        <div class="metric-label text-xs metallic-text">Avg Time</div>
                    </div>
                    <div class="industrial-texture p-3 rounded text-center">
                        <div class="metric-value text-lg" id="successRate">100%</div>
                        <div class="metric-label text-xs metallic-text">Success Rate</div>
                    </div>
                    <div class="industrial-texture p-3 rounded text-center">
                        <div class="metric-value text-lg" id="throughput">0/min</div>
                        <div class="metric-label text-xs metallic-text">Throughput</div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="console-panel p-4">
                <h3 class="text-lg font-bold metallic-text mb-4">üéõÔ∏è Quick Actions</h3>
                <div class="space-y-2">
                    <button onclick="resetSystem()" class="w-full industrial-texture p-2 metallic-text hover:accent-text transition-all">
                        üîÑ Reset System
                    </button>
                    <button onclick="exportLogs()" class="w-full industrial-texture p-2 metallic-text hover:accent-text transition-all">
                        üìã Export Logs
                    </button>
                    <button onclick="showHelp()" class="w-full industrial-texture p-2 metallic-text hover:accent-text transition-all">
                        ‚ùì Help & Documentation
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="factory-header p-3 flex justify-between items-center text-sm">
        <div class="flex items-center space-x-4">
            <span class="metallic-text">MultiSWARM v2.0</span>
            <span class="metallic-text">Backend: <span class="accent-text" id="backendStatus">Connecting...</span></span>
        </div>
        <div class="flex items-center space-x-4">
            <span class="metallic-text">Built for Legal Innovation</span>
            <span class="metallic-text">‚öôÔ∏èü§ñ‚öñÔ∏è</span>
        </div>
    </footer>

    <script>
        // Socket.IO connection
        const socket = io('http://127.0.0.1:5000');

        // System state
        let systemState = {
            currentPhase: 'Ready',
            phases: {
                'A01_Intake': 0,
                'A02_Research': 0,
                'A03_Outline': 0,
                'B01_Review': 0,
                'B02_Drafting': 0,
                'C01_Editing': 0,
                'C02_Orchestration': 0
            },
            agents: {
                intake_agent: { status: 'idle', progress: 0 },
                research_agent: { status: 'idle', progress: 0 },
                drafting_agent: { status: 'idle', progress: 0 },
                orchestration_agent: { status: 'idle', progress: 0 }
            },
            casePackets: []
        };

        // Socket event handlers
        socket.on('connect', function() {
            console.log('Connected to MultiSWARM backend');
            updateBackendStatus('Connected');
            addActivityLog('üîó Connected to MultiSWARM backend', 'success');
        });

        socket.on('disconnect', function() {
            console.log('Disconnected from backend');
            updateBackendStatus('Disconnected');
            addActivityLog('‚ùå Disconnected from backend', 'error');
        });

        socket.on('server_ready', function(data) {
            addActivityLog('üéâ MultiSWARM backend ready', 'success');
        });

        socket.on('phase_change', function(data) {
            updateCurrentPhase(data.phase);
            addActivityLog(`‚ö° Phase changed to: ${data.phase}`, 'info');
        });

        socket.on('phase_completed', function(data) {
            updatePhaseProgress(data.phase, 100);
            addActivityLog(`‚úÖ Phase completed: ${data.phase}`, 'success');
        });

        socket.on('agent_activity', function(data) {
            updateAgentStatus(data.agent.replace(' Agent', '_agent').toLowerCase(), 'processing', data.progress);
            addActivityLog(`ü§ñ ${data.agent}: ${data.action}`, 'info');
        });

        socket.on('case_packet_ready', function(data) {
            addCasePacket(data.packet);
            addActivityLog(`üì¶ Case packet ready: ${data.packet.title}`, 'success');
        });

        socket.on('error', function(data) {
            addActivityLog(`‚ùå Error in ${data.phase}: ${data.error}`, 'error');
        });

        // UI Update Functions
        function updateBackendStatus(status) {
            const element = document.getElementById('backendStatus');
            element.textContent = status;
            element.className = status === 'Connected' ? 'accent-text' : 'text-red-400';
        }

        function updateCurrentPhase(phase) {
            document.getElementById('currentPhase').textContent = phase;
            systemState.currentPhase = phase;
        }

        function updatePhaseProgress(phase, progress) {
            systemState.phases[phase] = progress;

            const phaseElement = document.querySelector(`[data-phase="${phase}"]`);
            if (phaseElement) {
                phaseElement.style.setProperty('--progress', `${progress}%`);

                if (progress === 100) {
                    phaseElement.classList.add('completed');
                } else if (progress > 0) {
                    phaseElement.classList.add('active');
                }
            }

            updateOverallProgress();
        }

        function updateOverallProgress() {
            const totalPhases = Object.keys(systemState.phases).length;
            const completedPhases = Object.values(systemState.phases).filter(p => p === 100).length;
            const overallProgress = Math.round((completedPhases / totalPhases) * 100);

            document.getElementById('overallProgress').textContent = `${overallProgress}%`;
        }

        function updateAgentStatus(agentKey, status, progress) {
            if (systemState.agents[agentKey]) {
                systemState.agents[agentKey].status = status;
                systemState.agents[agentKey].progress = progress;

                updateAgentUI(agentKey, status, progress);
            }
        }

        function updateAgentUI(agentKey, status, progress) {
            const statusElement = document.getElementById(`${agentKey.split('_')[0]}_status`);
            const progressElement = document.getElementById(`${agentKey.split('_')[0]}_progress`);
            const percentElement = document.getElementById(`${agentKey.split('_')[0]}_percent`);
            const cardElement = document.querySelector(`[data-agent="${agentKey}"]`);

            if (statusElement) {
                statusElement.className = `status-indicator status-${status}`;
            }

            if (progressElement) {
                const circumference = 2 * Math.PI * 18;
                const offset = circumference - (progress / 100) * circumference;
                progressElement.style.strokeDashoffset = offset;
            }

            if (percentElement) {
                percentElement.textContent = `${progress}%`;
            }

            if (cardElement) {
                cardElement.classList.remove('active', 'completed');
                if (status === 'processing') {
                    cardElement.classList.add('active');
                } else if (status === 'completed') {
                    cardElement.classList.add('completed');
                }
            }
        }

        function addActivityLog(message, type = 'info') {
            const feed = document.getElementById('activityFeed');
            const entry = document.createElement('div');
            entry.className = 'industrial-texture p-3 rounded';

            const typeColors = {
                'success': 'accent-text',
                'error': 'text-red-400',
                'warning': 'text-yellow-400',
                'info': 'metallic-text'
            };

            entry.innerHTML = `
                <div class="font-medium ${typeColors[type] || 'metallic-text'}">${message}</div>
                <div class="text-xs opacity-75 metallic-text">${new Date().toLocaleTimeString()}</div>
            `;

            feed.insertBefore(entry, feed.firstChild);

            // Keep only last 20 entries
            while (feed.children.length > 20) {
                feed.removeChild(feed.lastChild);
            }
        }

        function addCasePacket(packet) {
            systemState.casePackets.push(packet);

            const container = document.getElementById('casePackets');
            const packetElement = document.createElement('div');
            packetElement.className = 'industrial-texture p-3 rounded';

            packetElement.innerHTML = `
                <div class="font-medium accent-text">${packet.title}</div>
                <div class="text-xs metallic-text mt-1">
                    ${packet.documents.length} documents ‚Ä¢ ${packet.metadata.total_pages} pages
                </div>
                <div class="text-xs emerald-text mt-2">
                    Confidence: ${(packet.metadata.confidence_score * 100).toFixed(1)}%
                </div>
                <button onclick="downloadPacket('${packet.id}')"
                        class="mt-2 px-3 py-1 bg-emerald-600 text-white text-xs rounded hover:bg-emerald-700">
                    Download
                </button>
            `;

            container.insertBefore(packetElement, container.firstChild);
        }

        // Control Functions
        function startMultiswarm() {
            socket.emit('start_factory');
            addActivityLog('üöÄ Starting MultiSWARM pipeline', 'info');
        }

        function resetSystem() {
            // Reset all phases and agents
            Object.keys(systemState.phases).forEach(phase => {
                updatePhaseProgress(phase, 0);
                const phaseElement = document.querySelector(`[data-phase="${phase}"]`);
                if (phaseElement) {
                    phaseElement.classList.remove('active', 'completed');
                }
            });

            Object.keys(systemState.agents).forEach(agent => {
                updateAgentStatus(agent, 'idle', 0);
            });

            systemState.casePackets = [];
            document.getElementById('casePackets').innerHTML = `
                <div class="industrial-texture p-3 rounded">
                    <div class="font-medium metallic-text">No case packets ready</div>
                    <div class="text-xs opacity-75">Complete MultiSWARM pipeline to generate packets</div>
                </div>
            `;

            updateCurrentPhase('Ready');
            addActivityLog('üîÑ System reset complete', 'info');
        }

        function exportLogs() {
            const logs = Array.from(document.querySelectorAll('#activityFeed > div'))
                .map(entry => entry.textContent)
                .join('\n');

            const blob = new Blob([logs], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `multiswarm_logs_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            addActivityLog('üìã Logs exported successfully', 'success');
        }

        function downloadPacket(packetId) {
            // In a real implementation, this would download the actual packet
            addActivityLog(`üì¶ Downloading case packet: ${packetId}`, 'info');
        }

        function showHelp() {
            const helpText = `
MultiSWARM Phase Dashboard Help:

üîÑ PHASES:
‚Ä¢ A01-A03: Intake, Research, Outline
‚Ä¢ B01-B02: Review, Drafting
‚Ä¢ C01-C02: Editing, Orchestration

ü§ñ AGENTS:
‚Ä¢ Intake Agent: Processes client information
‚Ä¢ Research Agent: Conducts legal research
‚Ä¢ Drafting Agent: Creates legal documents
‚Ä¢ Orchestration Agent: Coordinates final assembly

üì¶ CASE PACKETS:
Complete packets are generated after full pipeline completion
            `;

            alert(helpText);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            addActivityLog('‚öôÔ∏è MultiSWARM Dashboard initialized', 'success');
        });
    </script>
</body>
</html>