<!--
LawyerFactory React-Based Workflow Interface
7-phase guided legal document automation with accordion UI, popup animations, and real-time progress tracking.
Merges best elements from factory.html, consolidated_factory.html, and enhanced_factory.html into unified React interface.
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‚öôÔ∏è LawyerFactory - 7-Phase Legal Workflow</title>

    <!-- Core Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- React and Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/framer-motion@10.16.4/dist/framer-motion.umd.js"></script>

    <!-- ag-Grid for Evidence Management -->
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community@30.2.1/dist/ag-grid-community.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-react@30.2.1/lib/ag-grid-react.min.js"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Courier+Prime:wght@400;700&display=swap"
      rel="stylesheet" />

    <style>
      :root {
        --charcoal-dark: #1a1a1a;
        --industrial-gray: #2d2d2d;
        --steam-punk: #3d4a3d;
        --oxidized-copper: #b87333;
        --emerald-accent: #00b894;
        --metallic-silver: #c0c0c0;
        --rust-brown: #8b4513;
        --gold-highlight: #ffd700;
        --warning-amber: #f39c12;
        --success-green: #27ae60;
        --error-red: #e74c3c;
      }

      body {
        font-family: "Courier Prime", "JetBrains Mono", monospace;
        background: linear-gradient(
          135deg,
          var(--charcoal-dark) 0%,
          var(--industrial-gray) 50%,
          var(--steam-punk) 100%
        );
        color: var(--metallic-silver);
        margin: 0;
        padding: 0;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Industrial Machine Framework */
      .factory-container {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        position: relative;
      }

      .phase-accordion {
        background: linear-gradient(
          135deg,
          var(--industrial-gray),
          var(--steam-punk)
        );
        border: 2px solid var(--oxidized-copper);
        border-radius: 8px;
        margin: 8px 0;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .phase-accordion.active {
        border-color: var(--emerald-accent);
        box-shadow: 0 8px 24px rgba(0, 184, 148, 0.2);
      }

      .phase-accordion.completed {
        border-color: var(--success-green);
        background: linear-gradient(
          135deg,
          var(--steam-punk),
          var(--industrial-gray)
        );
      }

      .phase-header {
        padding: 16px 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: rgba(184, 115, 51, 0.1);
        transition: background 0.2s ease;
      }

      .phase-header:hover {
        background: rgba(184, 115, 51, 0.2);
      }

      .phase-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        background: rgba(0, 0, 0, 0.2);
      }

      .phase-content.expanded {
        max-height: 2000px;
      }

      .phase-inner {
        padding: 20px;
      }

      /* Popup Notification System */
      .notification-overlay {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        pointer-events: none;
      }

      .notification {
        background: linear-gradient(
          135deg,
          var(--industrial-gray),
          var(--steam-punk)
        );
        border: 2px solid var(--oxidized-copper);
        border-radius: 8px;
        padding: 16px 20px;
        margin: 8px 0;
        min-width: 300px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        transform: translateX(400px);
        transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        pointer-events: auto;
      }

      .notification.show {
        transform: translateX(0);
      }

      .notification.success {
        border-color: var(--success-green);
        background: linear-gradient(
          135deg,
          var(--steam-punk),
          rgba(39, 174, 96, 0.1)
        );
      }

      .notification.warning {
        border-color: var(--warning-amber);
        background: linear-gradient(
          135deg,
          var(--steam-punk),
          rgba(243, 156, 18, 0.1)
        );
      }

      .notification.error {
        border-color: var(--error-red);
        background: linear-gradient(
          135deg,
          var(--steam-punk),
          rgba(231, 76, 60, 0.1)
        );
      }

      /* Progress Bar */
      .progress-bar {
        height: 8px;
        background: var(--charcoal-dark);
        border-radius: 4px;
        overflow: hidden;
        margin: 16px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--emerald-accent),
          var(--gold-highlight)
        );
        transition: width 0.5s ease;
      }

      /* Form Styling */
      .input-field {
        background: rgba(45, 45, 45, 0.8);
        border: 2px solid var(--oxidized-copper);
        border-radius: 6px;
        padding: 12px 16px;
        color: var(--metallic-silver);
        width: 100%;
        transition: border-color 0.2s ease;
      }

      .input-field:focus {
        outline: none;
        border-color: var(--emerald-accent);
        box-shadow: 0 0 8px rgba(0, 184, 148, 0.3);
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--emerald-accent),
          var(--oxidized-copper)
        );
        border: none;
        color: white;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        font-weight: 500;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 184, 148, 0.3);
      }

      .btn-secondary {
        background: transparent;
        border: 2px solid var(--oxidized-copper);
        color: var(--metallic-silver);
        padding: 10px 22px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .btn-secondary:hover {
        background: var(--oxidized-copper);
        color: white;
      }

      /* Upload Zone */
      .upload-zone {
        border: 2px dashed var(--oxidized-copper);
        border-radius: 8px;
        padding: 40px 20px;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .upload-zone:hover {
        border-color: var(--emerald-accent);
        background: rgba(0, 184, 148, 0.05);
      }

      .upload-zone.dragover {
        border-color: var(--gold-highlight);
        background: rgba(255, 215, 0, 0.1);
      }

      /* Phase Icons */
      .phase-icon {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 12px;
      }

      .phase-icon.pending {
        background: var(--industrial-gray);
        color: var(--metallic-silver);
      }

      .phase-icon.active {
        background: var(--emerald-accent);
        color: white;
      }

      .phase-icon.completed {
        background: var(--success-green);
        color: white;
      }

      /* Production Phase Separator */
      .production-separator {
        text-align: center;
        padding: 40px 20px;
        background: linear-gradient(
          90deg,
          transparent,
          var(--warning-amber),
          transparent
        );
        margin: 20px 0;
        border-radius: 8px;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .factory-container {
          padding: 10px;
        }

        .phase-header {
          padding: 12px 16px;
        }

        .phase-inner {
          padding: 16px;
        }

        .notification {
          min-width: 250px;
          margin: 4px 0;
        }
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <!-- Main Application Script -->
    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // Phase Configuration
      const PHASES = [
        {
          id: "A01",
          name: "Document Intake",
          description: "Upload and categorize legal documents",
          type: "preproduction",
          icon: "üìÑ",
          inputs: ["Legal documents", "Client information", "Case details"],
          outputs: [
            "Categorized documents",
            "Extracted facts",
            "Evidence table",
          ],
        },
        {
          id: "A02",
          name: "Legal Research",
          description: "Automated legal research and authority gathering",
          type: "preproduction",
          icon: "üîç",
          inputs: ["Case facts", "Jurisdiction", "Legal issues"],
          outputs: ["Legal authorities", "Precedent cases", "Research notes"],
        },
        {
          id: "A03",
          name: "Case Outline",
          description: "Structure case claims and arguments",
          type: "preproduction",
          icon: "üìã",
          inputs: ["Research results", "Evidence", "Legal theories"],
          outputs: ["Case outline", "Claims matrix", "Argument structure"],
        },
        {
          id: "B01",
          name: "Quality Review",
          description: "Validate research and outline quality",
          type: "production",
          icon: "‚úÖ",
          inputs: ["Case outline", "Research quality", "Evidence strength"],
          outputs: [
            "Quality assessment",
            "Missing elements",
            "Recommendations",
          ],
        },
        {
          id: "B02",
          name: "Document Drafting",
          description: "Generate professional legal documents",
          type: "production",
          icon: "‚úçÔ∏è",
          inputs: ["Approved outline", "Templates", "Legal standards"],
          outputs: ["Draft documents", "Legal pleadings", "Supporting briefs"],
        },
        {
          id: "C01",
          name: "Document Editing",
          description: "Refine formatting and citations",
          type: "production",
          icon: "üîß",
          inputs: ["Draft documents", "Citation rules", "Format standards"],
          outputs: ["Formatted documents", "Proper citations", "Final review"],
        },
        {
          id: "C02",
          name: "Final Orchestration",
          description: "Coordinate and finalize all deliverables",
          type: "production",
          icon: "üéØ",
          inputs: ["All phase outputs", "Quality checks", "Client review"],
          outputs: ["Court-ready documents", "Filing package", "Case summary"],
        },
      ];

      // Notification Component
      const Notification = ({ notification, onClose }) => {
        useEffect(() => {
          const timer = setTimeout(() => {
            onClose(notification.id);
          }, notification.duration || 5000);

          return () => clearTimeout(timer);
        }, [notification, onClose]);

        return (
          <div className={`notification ${notification.type} show`}>
            <div className="flex items-center justify-between">
              <div className="flex items-center">
                <span className="mr-3 text-xl">
                  {notification.type === "success"
                    ? "‚úÖ"
                    : notification.type === "warning"
                    ? "‚ö†Ô∏è"
                    : "‚ùå"}
                </span>
                <div>
                  <div className="font-medium">{notification.title}</div>
                  <div className="text-sm opacity-80">
                    {notification.message}
                  </div>
                </div>
              </div>
              <button
                onClick={() => onClose(notification.id)}
                className="ml-4 text-xl opacity-60 hover:opacity-100">
                √ó
              </button>
            </div>
          </div>
        );
      };

      // Phase Component
      const PhaseComponent = ({
        phase,
        isActive,
        isCompleted,
        isExpanded,
        onToggle,
        onStart,
        onComplete,
        progress,
      }) => {
        const getPhaseStatus = () => {
          if (isCompleted) return "completed";
          if (isActive) return "active";
          return "pending";
        };

        return (
          <div
            className={`phase-accordion ${isActive ? "active" : ""} ${
              isCompleted ? "completed" : ""
            }`}>
            <div className="phase-header" onClick={onToggle}>
              <div className="flex items-center">
                <div className={`phase-icon ${getPhaseStatus()}`}>
                  {isCompleted ? "‚úì" : phase.icon}
                </div>
                <div>
                  <h3 className="text-lg font-semibold text-gold-highlight">
                    Phase {phase.id}: {phase.name}
                  </h3>
                  <p className="text-sm opacity-80">{phase.description}</p>
                </div>
              </div>
              <div className="flex items-center space-x-4">
                {isActive && (
                  <div className="text-emerald-accent font-medium">
                    In Progress
                  </div>
                )}
                {isCompleted && (
                  <div className="text-success-green font-medium">
                    Completed
                  </div>
                )}
                <svg
                  className={`w-6 h-6 transform transition-transform ${
                    isExpanded ? "rotate-180" : ""
                  }`}
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24">
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </div>
            </div>

            <div className={`phase-content ${isExpanded ? "expanded" : ""}`}>
              <div className="phase-inner">
                {isActive && progress > 0 && (
                  <div className="progress-bar">
                    <div
                      className="progress-fill"
                      style={{ width: `${progress}%` }}></div>
                  </div>
                )}

                <div className="grid md:grid-cols-2 gap-6 mb-6">
                  <div>
                    <h4 className="text-oxidized-copper font-medium mb-3">
                      Required Inputs:
                    </h4>
                    <ul className="space-y-2">
                      {phase.inputs.map((input, idx) => (
                        <li key={idx} className="flex items-center text-sm">
                          <span className="w-2 h-2 bg-emerald-accent rounded-full mr-3"></span>
                          {input}
                        </li>
                      ))}
                    </ul>
                  </div>

                  <div>
                    <h4 className="text-oxidized-copper font-medium mb-3">
                      Expected Outputs:
                    </h4>
                    <ul className="space-y-2">
                      {phase.outputs.map((output, idx) => (
                        <li key={idx} className="flex items-center text-sm">
                          <span className="w-2 h-2 bg-gold-highlight rounded-full mr-3"></span>
                          {output}
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>

                {/* Phase-specific content would go here */}
                {renderPhaseContent(phase, isActive, onStart, onComplete)}
              </div>
            </div>
          </div>
        );
      };

      // Phase-specific content renderer
      const renderPhaseContent = (phase, isActive, onStart, onComplete) => {
        switch (phase.id) {
          case "A01":
            return (
              <div className="space-y-6">
                <div className="upload-zone">
                  <div className="text-4xl mb-4">üìÅ</div>
                  <p className="text-lg mb-2">Drop legal documents here</p>
                  <p className="text-sm opacity-70">
                    Supports PDF, DOC, DOCX files
                  </p>
                  <input
                    type="file"
                    multiple
                    className="hidden"
                    accept=".pdf,.doc,.docx"
                  />
                </div>

                <div className="grid md:grid-cols-2 gap-4">
                  <input
                    type="text"
                    placeholder="Client Name"
                    className="input-field"
                  />
                  <input
                    type="text"
                    placeholder="Opposing Party"
                    className="input-field"
                  />
                  <input
                    type="text"
                    placeholder="Jurisdiction"
                    className="input-field"
                  />
                  <select className="input-field">
                    <option>Select Case Type</option>
                    <option>Contract Dispute</option>
                    <option>Personal Injury</option>
                    <option>Employment Law</option>
                    <option>Other</option>
                  </select>
                </div>

                {!isActive ? (
                  <button
                    onClick={() => onStart(phase.id)}
                    className="btn-primary">
                    Start Document Intake
                  </button>
                ) : (
                  <div className="flex space-x-4">
                    <button
                      onClick={() => onComplete(phase.id)}
                      className="btn-primary">
                      Complete Phase
                    </button>
                    <button className="btn-secondary">Save Progress</button>
                  </div>
                )}
              </div>
            );

          case "A02":
            return (
              <div className="space-y-6">
                <div className="bg-industrial-gray p-4 rounded-lg">
                  <h4 className="text-emerald-accent mb-3">
                    Research Configuration
                  </h4>
                  <div className="grid md:grid-cols-2 gap-4">
                    <label className="flex items-center space-x-3">
                      <input
                        type="checkbox"
                        defaultChecked
                        className="rounded"
                      />
                      <span>CourtListener Integration</span>
                    </label>
                    <label className="flex items-center space-x-3">
                      <input
                        type="checkbox"
                        defaultChecked
                        className="rounded"
                      />
                      <span>Google Scholar</span>
                    </label>
                    <label className="flex items-center space-x-3">
                      <input type="checkbox" className="rounded" />
                      <span>Westlaw API</span>
                    </label>
                    <label className="flex items-center space-x-3">
                      <input type="checkbox" className="rounded" />
                      <span>Legal Databases</span>
                    </label>
                  </div>
                </div>

                {!isActive ? (
                  <button
                    onClick={() => onStart(phase.id)}
                    className="btn-primary">
                    Start Legal Research
                  </button>
                ) : (
                  <div className="flex space-x-4">
                    <button
                      onClick={() => onComplete(phase.id)}
                      className="btn-primary">
                      Complete Research
                    </button>
                    <button className="btn-secondary">Review Findings</button>
                  </div>
                )}
              </div>
            );

          default:
            return (
              <div className="space-y-4">
                <p className="text-sm opacity-80">
                  Phase implementation in progress. This will contain the
                  specific workflow for {phase.name}.
                </p>
                {!isActive ? (
                  <button
                    onClick={() => onStart(phase.id)}
                    className="btn-primary">
                    Start {phase.name}
                  </button>
                ) : (
                  <div className="flex space-x-4">
                    <button
                      onClick={() => onComplete(phase.id)}
                      className="btn-primary">
                      Complete Phase
                    </button>
                    <button className="btn-secondary">Save Progress</button>
                  </div>
                )}
              </div>
            );
        }
      };

      // Main Application Component
      const LawyerFactoryApp = () => {
        const [activePhase, setActivePhase] = useState(null);
        const [completedPhases, setCompletedPhases] = useState(new Set());
        const [expandedPhases, setExpandedPhases] = useState(new Set(["A01"]));
        const [notifications, setNotifications] = useState([]);
        const [progress, setProgress] = useState({});
        const [isProductionPhase, setIsProductionPhase] = useState(false);
        const [showProductionPause, setShowProductionPause] = useState(false);

        // Socket.IO connection
        const socketRef = useRef(null);

        useEffect(() => {
          socketRef.current = io();

          socketRef.current.on("phase_progress", (data) => {
            setProgress((prev) => ({ ...prev, [data.phase]: data.progress }));
          });

          socketRef.current.on("phase_complete", (data) => {
            handlePhaseComplete(data.phase);
            addNotification({
              type: "success",
              title: "Phase Complete",
              message: `${data.phase} has been completed successfully`,
            });
          });

          return () => {
            if (socketRef.current) {
              socketRef.current.disconnect();
            }
          };
        }, []);

        const addNotification = (notification) => {
          const id = Date.now();
          setNotifications((prev) => [...prev, { ...notification, id }]);
        };

        const removeNotification = (id) => {
          setNotifications((prev) => prev.filter((n) => n.id !== id));
        };

        const togglePhase = (phaseId) => {
          setExpandedPhases((prev) => {
            const newSet = new Set(prev);
            if (newSet.has(phaseId)) {
              newSet.delete(phaseId);
            } else {
              newSet.add(phaseId);
            }
            return newSet;
          });
        };

        const startPhase = (phaseId) => {
          setActivePhase(phaseId);
          setExpandedPhases((prev) => new Set([...prev, phaseId]));

          // Check if transitioning to production
          const phase = PHASES.find((p) => p.id === phaseId);
          if (phase && phase.type === "production" && !isProductionPhase) {
            setShowProductionPause(true);
            addNotification({
              type: "warning",
              title: "Production Phase",
              message:
                "Transitioning from preproduction to production phases. Please review before continuing.",
              duration: 8000,
            });
          }

          // Emit to backend
          if (socketRef.current) {
            socketRef.current.emit("start_phase", { phase: phaseId });
          }

          addNotification({
            type: "success",
            title: "Phase Started",
            message: `${phase?.name} has been initiated`,
          });
        };

        const handlePhaseComplete = (phaseId) => {
          setCompletedPhases((prev) => new Set([...prev, phaseId]));
          setActivePhase(null);

          // Auto-expand next phase
          const currentIndex = PHASES.findIndex((p) => p.id === phaseId);
          if (currentIndex < PHASES.length - 1) {
            const nextPhase = PHASES[currentIndex + 1];
            setExpandedPhases((prev) => new Set([...prev, nextPhase.id]));
          }
        };

        const approveProductionTransition = () => {
          setIsProductionPhase(true);
          setShowProductionPause(false);
          addNotification({
            type: "success",
            title: "Production Approved",
            message:
              "Production phases are now active. Proceeding with document generation.",
          });
        };

        const preproductionPhases = PHASES.filter(
          (p) => p.type === "preproduction"
        );
        const productionPhases = PHASES.filter((p) => p.type === "production");
        const overallProgress = (completedPhases.size / PHASES.length) * 100;

        return (
          <div className="factory-container">
            {/* Header */}
            <header className="bg-charcoal-dark border-b-2 border-oxidized-copper p-6">
              <div className="max-w-6xl mx-auto">
                <h1 className="text-3xl font-bold text-gold-highlight mb-2">
                  ‚öôÔ∏è LawyerFactory Workflow
                </h1>
                <p className="text-metallic-silver opacity-80">
                  7-Phase Legal Document Automation Platform
                </p>

                <div className="mt-4">
                  <div className="flex justify-between items-center mb-2">
                    <span className="text-sm">Overall Progress</span>
                    <span className="text-sm">
                      {Math.round(overallProgress)}%
                    </span>
                  </div>
                  <div className="progress-bar">
                    <div
                      className="progress-fill"
                      style={{ width: `${overallProgress}%` }}></div>
                  </div>
                </div>
              </div>
            </header>

            {/* Main Content */}
            <main className="flex-1 max-w-6xl mx-auto p-6 w-full">
              {/* Preproduction Phases */}
              <section className="mb-8">
                <h2 className="text-2xl font-bold text-emerald-accent mb-6 flex items-center">
                  <span className="bg-emerald-accent text-white rounded-full w-8 h-8 flex items-center justify-center text-sm mr-3">
                    A
                  </span>
                  Preproduction Phases
                </h2>

                {preproductionPhases.map((phase) => (
                  <PhaseComponent
                    key={phase.id}
                    phase={phase}
                    isActive={activePhase === phase.id}
                    isCompleted={completedPhases.has(phase.id)}
                    isExpanded={expandedPhases.has(phase.id)}
                    onToggle={() => togglePhase(phase.id)}
                    onStart={startPhase}
                    onComplete={handlePhaseComplete}
                    progress={progress[phase.id] || 0}
                  />
                ))}
              </section>

              {/* Production Transition */}
              {showProductionPause && (
                <div className="production-separator">
                  <h3 className="text-xl font-bold text-warning-amber mb-4">
                    ‚ö†Ô∏è Production Phase Transition
                  </h3>
                  <p className="mb-6 text-charcoal-dark">
                    You are about to enter the production phase where legal
                    documents will be generated. Please review the preproduction
                    results before proceeding.
                  </p>
                  <div className="flex justify-center space-x-4">
                    <button
                      onClick={approveProductionTransition}
                      className="btn-primary">
                      Approve & Continue
                    </button>
                    <button
                      onClick={() => setShowProductionPause(false)}
                      className="btn-secondary">
                      Review More
                    </button>
                  </div>
                </div>
              )}

              {/* Production Phases */}
              <section
                className={`${
                  !isProductionPhase ? "opacity-50 pointer-events-none" : ""
                }`}>
                <h2 className="text-2xl font-bold text-oxidized-copper mb-6 flex items-center">
                  <span className="bg-oxidized-copper text-white rounded-full w-8 h-8 flex items-center justify-center text-sm mr-3">
                    B
                  </span>
                  Production Phases
                </h2>

                {productionPhases.map((phase) => (
                  <PhaseComponent
                    key={phase.id}
                    phase={phase}
                    isActive={activePhase === phase.id}
                    isCompleted={completedPhases.has(phase.id)}
                    isExpanded={expandedPhases.has(phase.id)}
                    onToggle={() => togglePhase(phase.id)}
                    onStart={startPhase}
                    onComplete={handlePhaseComplete}
                    progress={progress[phase.id] || 0}
                  />
                ))}
              </section>
            </main>

            {/* Notification Overlay */}
            <div className="notification-overlay">
              {notifications.map((notification) => (
                <Notification
                  key={notification.id}
                  notification={notification}
                  onClose={removeNotification}
                />
              ))}
            </div>
          </div>
        );
      };

      // Render the application
      ReactDOM.render(<LawyerFactoryApp />, document.getElementById("root"));
    </script>
  </body>
</html>
